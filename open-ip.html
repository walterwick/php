<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Map in Iframe with IP-based Location</title>
</head>
<body>

<h1>IP Tabanlı Konum ile OpenStreetMap Iframe</h1>

<!-- Iframe with OpenStreetMap -->
<iframe id="mapIframe" width="600" height="450" style="border: 1px solid black;"></iframe>

<script>
    // IP tabanlı konum almak için IPAPI kullan
    fetch('https://ipapi.co/json/')
        .then(response => response.json())
        .then(data => {
            const latitude = data.latitude;
            const longitude = data.longitude;
            
            // OpenStreetMap iframe URL'sini oluştur
            const osmUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${longitude-0.05},${latitude-0.05},${longitude+0.05},${latitude+0.05}&layer=mapnik&marker=${latitude},${longitude}`;

            // Iframe'in src'sini OpenStreetMap URL'si ile güncelle
            document.getElementById('mapIframe').src = osmUrl;
        })
        .catch(error => console.error('Error fetching location from IPAPI:', error));
</script>

</body>
</html>
